<cabecalho></cabecalho>
<div class="container">
    <h1>Livros cadastrados</h1>
    <section class="table-container" tabindex="0">
        <table mat-table [dataSource]="dataSource">
            <ng-container matColumnDef="titulo">
                <th mat-header-cell *matHeaderCellDef>Título</th>
                <td mat-cell *matCellDef="let livro"> {{livro.titulo}} </td>
            </ng-container>
            <ng-container matColumnDef="categoria">
                <th mat-header-cell *matHeaderCellDef>Categoria</th>
                <td mat-cell *matCellDef="let livro"> {{livro.categoria}} </td>
            </ng-container>
            <ng-container matColumnDef="autor">
                <th mat-header-cell *matHeaderCellDef>Autor</th>
                <td mat-cell *matCellDef="let livro">{{livro.autor}} </td>
            </ng-container>
            <ng-container matColumnDef="isbn">
                <th mat-header-cell *matHeaderCellDef>ISBN</th>
                <td mat-cell *matCellDef="let livro">{{livro.isbn | mask:"000-0-00-000000-0"}}</td>
            </ng-container>
            <ng-container matColumnDef="capa">
                <th mat-header-cell *matHeaderCellDef>Capa</th>
                <td mat-cell *matCellDef="let livros">
                    <img width="40px" src="{{ livros.foto | livro}}" alt="livro">
                </td>
            </ng-container>
            <ng-container matColumnDef="excluir">
                <th mat-header-cell *matHeaderCellDef>Excluir</th>
                <td mat-cell *matCellDef="let livro">
                    <button mat-icon-button (click)="deleteBook(livro.id)" class="btn-delete">
                        <i class="material-icons">delete</i>
                    </button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </section>
    <form  [formGroup]="formRegisterBook">
        <div class="div-form">
            <mat-form-field  appearance="outline">
                <mat-label>Título</mat-label>
                <input type="text" matInput placeholder="título" formControlName="titulo" maxlength="50">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Autor</mat-label>
                <input type="text" matInput placeholder="Autor" formControlName="autor">
            </mat-form-field>
            <label>Carregar imagem
                    <input type="file" class="upload-photo" (change)="uploadFile($event)">
            </label>
            <mat-progress-bar  class="progress-bar" *ngIf="isLoadUpload"></mat-progress-bar>
        </div>
        <div class="div-form">
            <mat-form-field appearance="outline">
                <mat-label>Categoria</mat-label>
                <input type="text" matInput placeholder="categoria" formControlName="categoria">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>ISBN</mat-label>
                <input type="text" matInput placeholder="ISBN do livro" formControlName="isbn" mask="000-0-00-000000-0">
            </mat-form-field>
            <button class="btn-submit" mat-raised-button (click)="registerBook()">Adicionar</button>
            <a class="full-width btn-close" mat-raised-button routerLink="/livros"></a>
        </div>
    </form>
</div>